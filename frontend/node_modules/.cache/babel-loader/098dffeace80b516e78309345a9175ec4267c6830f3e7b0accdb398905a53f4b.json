{"ast":null,"code":"import { storageService } from './asyncStorageService';\nimport { httpService } from './httpService';\nimport { userService } from './userService';\nimport { utilService } from './utilService';\nexport const authService = {\n  login,\n  logout,\n  signup,\n  getLoggedinUser\n};\nasync function login(userCred) {\n  // const users = await storageService.query('user')\n  // const user = users.find(user => user.email === userCred.email && user.password === userCred.password)\n  // return _saveLocalUser(user)\n\n  const user = await httpService.post('auth/login', userCred);\n  if (user) {\n    console.log('user', user);\n    _saveLocalUser(user);\n    return user;\n  }\n  // throw Error('unregistered user')\n}\n\nasync function signup(userCred) {\n  // const users = await userService.getUsers()\n  // const isUserExist = users.find(user => user.email === userCred.email)\n  // if (isUserExist) throw Error('email already exists')\n\n  // const user = await storageService.post('user', userCred)\n  const user = await httpService.post('auth/signup', userCred);\n  return _saveLocalUser(user);\n}\nasync function logout() {\n  await httpService.post('auth/logout');\n  sessionStorage.clear();\n}\nfunction _saveLocalUser(user) {\n  sessionStorage.setItem('loggedinUser', JSON.stringify(user));\n  return user;\n}\nfunction getLoggedinUser() {\n  let user = JSON.parse(sessionStorage.getItem('loggedinUser'));\n  if (typeof user !== 'object' || !user) {\n    user = {\n      _id: utilService.makeId(),\n      fullname: 'Guest',\n      username: 'Guest',\n      imgUrl: 'https://i.ibb.co/wS9zKnQ/guest-02.png'\n    };\n  }\n  return user;\n}","map":{"version":3,"names":["storageService","httpService","userService","utilService","authService","login","logout","signup","getLoggedinUser","userCred","user","post","console","log","_saveLocalUser","sessionStorage","clear","setItem","JSON","stringify","parse","getItem","_id","makeId","fullname","username","imgUrl"],"sources":["/Users/dafi/Desktop/dev/projects/auth-app/frontend/src/services/authService.js"],"sourcesContent":["import { storageService } from './asyncStorageService';\nimport { httpService } from './httpService';\nimport { userService } from './userService';\nimport { utilService } from './utilService';\n\nexport const authService = {\n    login,\n    logout,\n    signup,\n    getLoggedinUser,\n};\n\nasync function login(userCred) {\n    // const users = await storageService.query('user')\n    // const user = users.find(user => user.email === userCred.email && user.password === userCred.password)\n    // return _saveLocalUser(user)\n\n    const user = await httpService.post('auth/login', userCred);\n    if (user) {\n        console.log('user', user);\n        _saveLocalUser(user);\n        return user;\n    }\n    // throw Error('unregistered user')\n}\n\nasync function signup(userCred) {\n    // const users = await userService.getUsers()\n    // const isUserExist = users.find(user => user.email === userCred.email)\n    // if (isUserExist) throw Error('email already exists')\n\n    // const user = await storageService.post('user', userCred)\n    const user = await httpService.post('auth/signup', userCred);\n    return _saveLocalUser(user);\n}\n\nasync function logout() {\n    await httpService.post('auth/logout');\n    sessionStorage.clear();\n}\n\nfunction _saveLocalUser(user) {\n    sessionStorage.setItem('loggedinUser', JSON.stringify(user));\n    return user;\n}\n\nfunction getLoggedinUser() {\n    let user = JSON.parse(sessionStorage.getItem('loggedinUser'));\n    if (typeof user !== 'object' || !user) {\n        user = {\n            _id: utilService.makeId(),\n            fullname: 'Guest',\n            username: 'Guest',\n            imgUrl: 'https://i.ibb.co/wS9zKnQ/guest-02.png',\n        };\n    }\n    return user;\n}"],"mappings":"AAAA,SAASA,cAAc,QAAQ,uBAAuB;AACtD,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,WAAW,QAAQ,eAAe;AAE3C,OAAO,MAAMC,WAAW,GAAG;EACvBC,KAAK;EACLC,MAAM;EACNC,MAAM;EACNC;AACJ,CAAC;AAED,eAAeH,KAAK,CAACI,QAAQ,EAAE;EAC3B;EACA;EACA;;EAEA,MAAMC,IAAI,GAAG,MAAMT,WAAW,CAACU,IAAI,CAAC,YAAY,EAAEF,QAAQ,CAAC;EAC3D,IAAIC,IAAI,EAAE;IACNE,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEH,IAAI,CAAC;IACzBI,cAAc,CAACJ,IAAI,CAAC;IACpB,OAAOA,IAAI;EACf;EACA;AACJ;;AAEA,eAAeH,MAAM,CAACE,QAAQ,EAAE;EAC5B;EACA;EACA;;EAEA;EACA,MAAMC,IAAI,GAAG,MAAMT,WAAW,CAACU,IAAI,CAAC,aAAa,EAAEF,QAAQ,CAAC;EAC5D,OAAOK,cAAc,CAACJ,IAAI,CAAC;AAC/B;AAEA,eAAeJ,MAAM,GAAG;EACpB,MAAML,WAAW,CAACU,IAAI,CAAC,aAAa,CAAC;EACrCI,cAAc,CAACC,KAAK,EAAE;AAC1B;AAEA,SAASF,cAAc,CAACJ,IAAI,EAAE;EAC1BK,cAAc,CAACE,OAAO,CAAC,cAAc,EAAEC,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC,CAAC;EAC5D,OAAOA,IAAI;AACf;AAEA,SAASF,eAAe,GAAG;EACvB,IAAIE,IAAI,GAAGQ,IAAI,CAACE,KAAK,CAACL,cAAc,CAACM,OAAO,CAAC,cAAc,CAAC,CAAC;EAC7D,IAAI,OAAOX,IAAI,KAAK,QAAQ,IAAI,CAACA,IAAI,EAAE;IACnCA,IAAI,GAAG;MACHY,GAAG,EAAEnB,WAAW,CAACoB,MAAM,EAAE;MACzBC,QAAQ,EAAE,OAAO;MACjBC,QAAQ,EAAE,OAAO;MACjBC,MAAM,EAAE;IACZ,CAAC;EACL;EACA,OAAOhB,IAAI;AACf"},"metadata":{},"sourceType":"module","externalDependencies":[]}