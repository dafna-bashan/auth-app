{"ast":null,"code":"import { storageService } from './asyncStorageService';\nimport { utilService } from './utilService';\nexport const authService = {\n  login,\n  logout,\n  signup,\n  getLoggedinUser\n};\nasync function login(userCred) {\n  const users = await storageService.query('user');\n  const user = users.find(user => user.username === userCred.username);\n  // return _saveLocalUser(user)\n\n  // const user = await httpService.post('auth/login', userCred);\n  if (user) {\n    console.log('user', user);\n    _saveLocalUser(user);\n    return user;\n  }\n  throw Error('unregistered user');\n}\nasync function signup(userCred) {\n  const user = await storageService.post('user', userCred);\n  // const user = await httpService.post('auth/signup', userCred);\n  return _saveLocalUser(user);\n}\nasync function logout() {\n  sessionStorage.clear();\n  // return await httpService.post('auth/logout');\n}\n\nfunction _saveLocalUser(user) {\n  sessionStorage.setItem('loggedinUser', JSON.stringify(user));\n  return user;\n}\nfunction getLoggedinUser() {\n  let user = JSON.parse(sessionStorage.getItem('loggedinUser'));\n  if (typeof user !== 'object' || !user) {\n    user = {\n      _id: utilService.makeId(),\n      fullname: 'Guest',\n      username: 'Guest',\n      imgUrl: 'https://i.ibb.co/wS9zKnQ/guest-02.png'\n    };\n  }\n  return user;\n}","map":{"version":3,"names":["storageService","utilService","authService","login","logout","signup","getLoggedinUser","userCred","users","query","user","find","username","console","log","_saveLocalUser","Error","post","sessionStorage","clear","setItem","JSON","stringify","parse","getItem","_id","makeId","fullname","imgUrl"],"sources":["/Users/dafi/Desktop/dev/projects/auth-app/src/services/authService.js"],"sourcesContent":["import { storageService } from './asyncStorageService';\nimport { utilService } from './utilService';\n\nexport const authService = {\n    login,\n    logout,\n    signup,\n    getLoggedinUser,\n};\n\nasync function login(userCred) {\n    const users = await storageService.query('user')\n    const user = users.find(user => user.username === userCred.username)\n    // return _saveLocalUser(user)\n\n    // const user = await httpService.post('auth/login', userCred);\n    if (user) {\n        console.log('user', user);\n        _saveLocalUser(user);\n        return user;\n    }\n    throw Error('unregistered user')\n}\n\nasync function signup(userCred) {\n    const user = await storageService.post('user', userCred)\n    // const user = await httpService.post('auth/signup', userCred);\n    return _saveLocalUser(user);\n}\n\nasync function logout() {\n    sessionStorage.clear();\n    // return await httpService.post('auth/logout');\n}\n\nfunction _saveLocalUser(user) {\n    sessionStorage.setItem('loggedinUser', JSON.stringify(user));\n    return user;\n}\n\nfunction getLoggedinUser() {\n    let user = JSON.parse(sessionStorage.getItem('loggedinUser'));\n    if (typeof user !== 'object' || !user) {\n        user = {\n            _id: utilService.makeId(),\n            fullname: 'Guest',\n            username: 'Guest',\n            imgUrl: 'https://i.ibb.co/wS9zKnQ/guest-02.png',\n        };\n    }\n    return user;\n}"],"mappings":"AAAA,SAASA,cAAc,QAAQ,uBAAuB;AACtD,SAASC,WAAW,QAAQ,eAAe;AAE3C,OAAO,MAAMC,WAAW,GAAG;EACvBC,KAAK;EACLC,MAAM;EACNC,MAAM;EACNC;AACJ,CAAC;AAED,eAAeH,KAAK,CAACI,QAAQ,EAAE;EAC3B,MAAMC,KAAK,GAAG,MAAMR,cAAc,CAACS,KAAK,CAAC,MAAM,CAAC;EAChD,MAAMC,IAAI,GAAGF,KAAK,CAACG,IAAI,CAACD,IAAI,IAAIA,IAAI,CAACE,QAAQ,KAAKL,QAAQ,CAACK,QAAQ,CAAC;EACpE;;EAEA;EACA,IAAIF,IAAI,EAAE;IACNG,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEJ,IAAI,CAAC;IACzBK,cAAc,CAACL,IAAI,CAAC;IACpB,OAAOA,IAAI;EACf;EACA,MAAMM,KAAK,CAAC,mBAAmB,CAAC;AACpC;AAEA,eAAeX,MAAM,CAACE,QAAQ,EAAE;EAC5B,MAAMG,IAAI,GAAG,MAAMV,cAAc,CAACiB,IAAI,CAAC,MAAM,EAAEV,QAAQ,CAAC;EACxD;EACA,OAAOQ,cAAc,CAACL,IAAI,CAAC;AAC/B;AAEA,eAAeN,MAAM,GAAG;EACpBc,cAAc,CAACC,KAAK,EAAE;EACtB;AACJ;;AAEA,SAASJ,cAAc,CAACL,IAAI,EAAE;EAC1BQ,cAAc,CAACE,OAAO,CAAC,cAAc,EAAEC,IAAI,CAACC,SAAS,CAACZ,IAAI,CAAC,CAAC;EAC5D,OAAOA,IAAI;AACf;AAEA,SAASJ,eAAe,GAAG;EACvB,IAAII,IAAI,GAAGW,IAAI,CAACE,KAAK,CAACL,cAAc,CAACM,OAAO,CAAC,cAAc,CAAC,CAAC;EAC7D,IAAI,OAAOd,IAAI,KAAK,QAAQ,IAAI,CAACA,IAAI,EAAE;IACnCA,IAAI,GAAG;MACHe,GAAG,EAAExB,WAAW,CAACyB,MAAM,EAAE;MACzBC,QAAQ,EAAE,OAAO;MACjBf,QAAQ,EAAE,OAAO;MACjBgB,MAAM,EAAE;IACZ,CAAC;EACL;EACA,OAAOlB,IAAI;AACf"},"metadata":{},"sourceType":"module","externalDependencies":[]}