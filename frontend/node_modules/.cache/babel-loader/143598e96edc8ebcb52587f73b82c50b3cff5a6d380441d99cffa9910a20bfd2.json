{"ast":null,"code":"import { utilService } from './utilService';\nexport const authService = {\n  login,\n  logout,\n  signup,\n  getLoggedinUser\n};\nasync function login(userCred) {\n  const users = await storageService.query('user');\n  const user = users.find(user => user.username === userCred.username);\n  // return _saveLocalUser(user)\n\n  // const user = await httpService.post('auth/login', userCred);\n  if (user) {\n    _saveLocalUser(user);\n    return user;\n  }\n}\nasync function signup(userCred) {\n  const user = await storageService.post('user', userCred);\n  // const user = await httpService.post('auth/signup', userCred);\n  return _saveLocalUser(user);\n}\nasync function logout() {\n  sessionStorage.clear();\n  // return await httpService.post('auth/logout');\n}\n\nfunction _saveLocalUser(user) {\n  sessionStorage.setItem('loggedinUser', JSON.stringify(user));\n  return user;\n}\nfunction getLoggedinUser() {\n  let user = JSON.parse(sessionStorage.getItem('loggedinUser'));\n  if (typeof user !== 'object' || !user) {\n    user = {\n      _id: utilService.makeId(),\n      fullname: 'Guest',\n      username: 'Guest',\n      imgUrl: 'https://i.ibb.co/wS9zKnQ/guest-02.png'\n    };\n  }\n  return user;\n}","map":{"version":3,"names":["utilService","authService","login","logout","signup","getLoggedinUser","userCred","users","storageService","query","user","find","username","_saveLocalUser","post","sessionStorage","clear","setItem","JSON","stringify","parse","getItem","_id","makeId","fullname","imgUrl"],"sources":["/Users/dafi/Desktop/dev/projects/auth-app/src/services/authService.js"],"sourcesContent":["import { utilService } from './utilService';\n\nexport const authService = {\n    login,\n    logout,\n    signup,\n    getLoggedinUser,\n};\n\nasync function login(userCred) {\n    const users = await storageService.query('user')\n    const user = users.find(user => user.username === userCred.username)\n    // return _saveLocalUser(user)\n\n    // const user = await httpService.post('auth/login', userCred);\n    if (user) {\n        _saveLocalUser(user);\n        return user;\n    }\n}\n\nasync function signup(userCred) {\n    const user = await storageService.post('user', userCred)\n    // const user = await httpService.post('auth/signup', userCred);\n    return _saveLocalUser(user);\n}\n\nasync function logout() {\n    sessionStorage.clear();\n    // return await httpService.post('auth/logout');\n}\n\nfunction _saveLocalUser(user) {\n    sessionStorage.setItem('loggedinUser', JSON.stringify(user));\n    return user;\n}\n\nfunction getLoggedinUser() {\n    let user = JSON.parse(sessionStorage.getItem('loggedinUser'));\n    if (typeof user !== 'object' || !user) {\n        user = {\n            _id: utilService.makeId(),\n            fullname: 'Guest',\n            username: 'Guest',\n            imgUrl: 'https://i.ibb.co/wS9zKnQ/guest-02.png',\n        };\n    }\n    return user;\n}"],"mappings":"AAAA,SAASA,WAAW,QAAQ,eAAe;AAE3C,OAAO,MAAMC,WAAW,GAAG;EACvBC,KAAK;EACLC,MAAM;EACNC,MAAM;EACNC;AACJ,CAAC;AAED,eAAeH,KAAK,CAACI,QAAQ,EAAE;EAC3B,MAAMC,KAAK,GAAG,MAAMC,cAAc,CAACC,KAAK,CAAC,MAAM,CAAC;EAChD,MAAMC,IAAI,GAAGH,KAAK,CAACI,IAAI,CAACD,IAAI,IAAIA,IAAI,CAACE,QAAQ,KAAKN,QAAQ,CAACM,QAAQ,CAAC;EACpE;;EAEA;EACA,IAAIF,IAAI,EAAE;IACNG,cAAc,CAACH,IAAI,CAAC;IACpB,OAAOA,IAAI;EACf;AACJ;AAEA,eAAeN,MAAM,CAACE,QAAQ,EAAE;EAC5B,MAAMI,IAAI,GAAG,MAAMF,cAAc,CAACM,IAAI,CAAC,MAAM,EAAER,QAAQ,CAAC;EACxD;EACA,OAAOO,cAAc,CAACH,IAAI,CAAC;AAC/B;AAEA,eAAeP,MAAM,GAAG;EACpBY,cAAc,CAACC,KAAK,EAAE;EACtB;AACJ;;AAEA,SAASH,cAAc,CAACH,IAAI,EAAE;EAC1BK,cAAc,CAACE,OAAO,CAAC,cAAc,EAAEC,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC,CAAC;EAC5D,OAAOA,IAAI;AACf;AAEA,SAASL,eAAe,GAAG;EACvB,IAAIK,IAAI,GAAGQ,IAAI,CAACE,KAAK,CAACL,cAAc,CAACM,OAAO,CAAC,cAAc,CAAC,CAAC;EAC7D,IAAI,OAAOX,IAAI,KAAK,QAAQ,IAAI,CAACA,IAAI,EAAE;IACnCA,IAAI,GAAG;MACHY,GAAG,EAAEtB,WAAW,CAACuB,MAAM,EAAE;MACzBC,QAAQ,EAAE,OAAO;MACjBZ,QAAQ,EAAE,OAAO;MACjBa,MAAM,EAAE;IACZ,CAAC;EACL;EACA,OAAOf,IAAI;AACf"},"metadata":{},"sourceType":"module","externalDependencies":[]}